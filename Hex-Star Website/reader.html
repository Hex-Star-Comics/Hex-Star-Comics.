<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hex-Star Comic Reader</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<head>
  <meta charset="UTF-8">
  <title>About | Hex-Star Comics</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="css/style.css">
  <script defer src="js/main.js"></script>
</head>

<body>

<div class="top-bar">
 <div class="progress">
  <div id="progressBar"></div>
 </div>
 <div class="reader-controls">
  <button onclick="toggleDark()">ğŸŒ™</button>
  <button onclick="toggleAmbient()">ğŸ”Š</button>
  <button onclick="reportIssue()">âš ï¸</button>
 </div>
</div>

<div class="reader" id="reader">
 <div class="page"><img id="leftImg"></div>
 <div class="page"><img id="rightImg"></div>
</div>

<div class="controls">
 <button onclick="prevPage()">â¬… Prev</button>
 <button onclick="nextPage()">Next â¡</button>
</div>

<audio id="flipSound" src="sounds/page-flip.mp3"></audio>
<audio id="ambientSound" src="sounds/ambient.mp3" loop></audio>

<script>
const pages = [
 "pages/page1.jpg","pages/page2.jpg",
 "pages/page3.jpg","pages/page4.jpg",
 "pages/page5.jpg","pages/page6.jpg"
];

let index = localStorage.getItem("pageIndex")
 ? parseInt(localStorage.getItem("pageIndex"))
 : 0;

function renderPages() {
 document.getElementById("leftImg").src = pages[index];
 document.getElementById("rightImg").src = pages[index+1] || pages[index];
 updateProgress();
 localStorage.setItem("pageIndex", index);
}

function playFlip() {
 const s = document.getElementById("flipSound");
 s.currentTime = 0;
 s.play();
}

function nextPage() {
 if (index < pages.length - 2) {
  index += 2;
  playFlip();
  renderPages();
 }
}

function prevPage() {
 if (index > 0) {
  index -= 2;
  playFlip();
  renderPages();
 }
}

function updateProgress() {
 const pct = ((index + 2) / pages.length) * 100;
 document.getElementById("progressBar").style.width = pct + "%";
}

function toggleDark() {
 document.body.classList.toggle("extra-dark");
}

function toggleAmbient() {
 const a = document.getElementById("ambientSound");
 a.paused ? a.play() : a.pause();
}

function reportIssue() {
 window.location.href =
 "mailto:hexstarcomics@gmail.com?subject=Comic Issue&body=Problem on page " + (index + 1);
}

/* Keyboard support */
document.addEventListener("keydown", e => {
 if (e.key === "ArrowRight") nextPage();
 if (e.key === "ArrowLeft") prevPage();
});

/* Mobile swipe support */
let startX = 0;
document.getElementById("reader").addEventListener("touchstart", e => {
 startX = e.touches[0].clientX;
});

document.getElementById("reader").addEventListener("touchend", e => {
 let endX = e.changedTouches[0].clientX;
 if (startX - endX > 50) nextPage();
 if (endX - startX > 50) prevPage();
});

renderPages();
</script>

</body>
</html>
